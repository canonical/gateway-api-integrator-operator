[33mWARNING [0m juju.client.connection:connection.py:927 unexpected facade SSHServer received from the controller
[32mINFO    [0m pytest_operator.plugin:plugin.py:806 Connecting to existing model github-pr-c36fb-k8s:testing on unspecified cloud
[33mWARNING [0m juju.client.connection:connection.py:927 unexpected facade SSHServer received from the controller
[33mWARNING [0m juju.client.connection:connection.py:927 unexpected facade SSHSession received from the controller
[33mWARNING [0m juju.client.connection:connection.py:927 unexpected facade SSHTunneler received from the controller
[33mWARNING [0m juju.client.connection:connection.py:927 unexpected facade SSHServer received from the controller
[33mWARNING [0m juju.client.connection:connection.py:927 unexpected facade SSHServer received from the controller
[32mINFO    [0m juju.model:model.py:2098 Deploying local:gateway-api-integrator-0
[32mINFO    [0m juju.model:model.py:2972 Waiting for model:
  gateway-api-integrator/0 [allocating] waiting: installing agent
[32mINFO    [0m juju.model:model.py:2098 Deploying ch:amd64/noble/self-signed-certificates-547
[32mINFO    [0m juju.model:model.py:2972 Waiting for model:
  self-signed-certificates/0 [allocating] waiting: installing agent
[33mWARNING [0m juju.model:model.py:1564 relate is deprecated and will be removed. Use integrate instead.
[32mINFO    [0m juju.model:model.py:2972 Waiting for model:
  self-signed-certificates/0 [idle] active: 
[32mINFO    [0m juju.model:model.py:2972 Waiting for model:
  self-signed-certificates/0 [idle] active: 
[32mINFO    [0m juju.model:model.py:2972 Waiting for model:
  gateway-api-integrator/0 [idle] blocked: Ingress and Gateway Route integration not ready. You must relate to either.
[32mINFO    [0m pytest_operator.plugin:plugin.py:951 Model status:

Model    Controller           Cloud/Region  Version  SLA          Timestamp
testing  github-pr-c36fb-k8s  k8s           3.6.14   unsupported  15:16:48Z

App                       Version  Status   Scale  Charm                     Channel  Rev  Address         Exposed  Message
gateway-api-integrator             blocked      1  gateway-api-integrator               0  10.152.183.153  no       Ingress and Gateway Route integration not ready. You must relate to either.
self-signed-certificates           active       1  self-signed-certificates  1/edge   547  10.152.183.17   no       

Unit                         Workload  Agent  Address     Ports  Message
gateway-api-integrator/0*    blocked   idle   10.1.0.156         Ingress and Gateway Route integration not ready. You must relate to either.
self-signed-certificates/0*  active    idle   10.1.0.96          

[32mINFO    [0m pytest_operator.plugin:plugin.py:957 Juju error logs:

unit-gateway-api-integrator-0: 15:14:57 ERROR unit.gateway-api-integrator/0.juju-log Configured gateway class  not present on the cluster.Available ones are: 'cilium,ck-gateway'
unit-gateway-api-integrator-0: 15:14:57 ERROR unit.gateway-api-integrator/0.juju-log Error setting up charm state component: Gateway class must be one of: [cilium,ck-gateway]
Traceback (most recent call last):
  File "/var/lib/juju/agents/unit-gateway-api-integrator-0/charm/src/state/validation.py", line 69, in wrapper
    return method(instance, *args)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/var/lib/juju/agents/unit-gateway-api-integrator-0/charm/src/charm.py", line 146, in _on_config_changed
    self._reconcile()
  File "/var/lib/juju/agents/unit-gateway-api-integrator-0/charm/src/charm.py", line 246, in _reconcile
    config = CharmConfig.from_charm(self, client)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/var/lib/juju/agents/unit-gateway-api-integrator-0/charm/src/resource_manager/permission.py", line 45, in wrapper
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/var/lib/juju/agents/unit-gateway-api-integrator-0/charm/src/state/config.py", line 88, in from_charm
    raise InvalidCharmConfigError(
state.config.InvalidCharmConfigError: Gateway class must be one of: [cilium,ck-gateway]
unit-gateway-api-integrator-0: 15:14:58 ERROR unit.gateway-api-integrator/0.juju-log Configured gateway class  not present on the cluster.Available ones are: 'cilium,ck-gateway'
unit-gateway-api-integrator-0: 15:14:58 ERROR unit.gateway-api-integrator/0.juju-log Error setting up charm state component: Gateway class must be one of: [cilium,ck-gateway]
Traceback (most recent call last):
  File "/var/lib/juju/agents/unit-gateway-api-integrator-0/charm/src/state/validation.py", line 69, in wrapper
    return method(instance, *args)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/var/lib/juju/agents/unit-gateway-api-integrator-0/charm/src/charm.py", line 161, in _on_start
    self._reconcile()
  File "/var/lib/juju/agents/unit-gateway-api-integrator-0/charm/src/charm.py", line 246, in _reconcile
    config = CharmConfig.from_charm(self, client)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/var/lib/juju/agents/unit-gateway-api-integrator-0/charm/src/resource_manager/permission.py", line 45, in wrapper
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/var/lib/juju/agents/unit-gateway-api-integrator-0/charm/src/state/config.py", line 88, in from_charm
    raise InvalidCharmConfigError(
state.config.InvalidCharmConfigError: Gateway class must be one of: [cilium,ck-gateway]
unit-gateway-api-integrator-0: 15:15:42 ERROR unit.gateway-api-integrator/0.juju-log Error setting up charm state component: Certificates integration not ready.
Traceback (most recent call last):
  File "/var/lib/juju/agents/unit-gateway-api-integrator-0/charm/src/state/validation.py", line 69, in wrapper
    return method(instance, *args)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/var/lib/juju/agents/unit-gateway-api-integrator-0/charm/src/charm.py", line 146, in _on_config_changed
    self._reconcile()
  File "/var/lib/juju/agents/unit-gateway-api-integrator-0/charm/src/charm.py", line 248, in _reconcile
    tls_information = TLSInformation.from_charm(self, self.certificates)
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/var/lib/juju/agents/unit-gateway-api-integrator-0/charm/src/state/tls.py", line 47, in from_charm
    cls.validate(charm)
  File "/var/lib/juju/agents/unit-gateway-api-integrator-0/charm/src/state/tls.py", line 82, in validate
    raise TlsIntegrationMissingError("Certificates integration not ready.")
state.tls.TlsIntegrationMissingError: Certificates integration not ready.
unit-gateway-api-integrator-0: 15:15:44 ERROR unit.gateway-api-integrator/0.juju-log certificates:0: Error setting up charm state component: Certificate data missing or incomplete.
Traceback (most recent call last):
  File "/var/lib/juju/agents/unit-gateway-api-integrator-0/charm/src/state/validation.py", line 69, in wrapper
    return method(instance, *args)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/var/lib/juju/agents/unit-gateway-api-integrator-0/charm/src/charm.py", line 151, in _on_certificates_relation_joined
    self._reconcile()
  File "/var/lib/juju/agents/unit-gateway-api-integrator-0/charm/src/charm.py", line 257, in _reconcile
    self._define_secret_resources(client, config, tls_information)
  File "/var/lib/juju/agents/unit-gateway-api-integrator-0/charm/src/charm.py", line 345, in _define_secret_resources
    resource_definition = SecretResourceDefinition.from_tls_information(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/var/lib/juju/agents/unit-gateway-api-integrator-0/charm/src/resource_manager/secret.py", line 61, in from_tls_information
    raise CertificateDataNotReadyError("Certificate data missing or incomplete.")
resource_manager.secret.CertificateDataNotReadyError: Certificate data missing or incomplete.
unit-gateway-api-integrator-0: 15:15:46 ERROR unit.gateway-api-integrator/0.juju-log certificates:0: Error setting up charm state component: Ingress and Gateway Route integration not ready. You must relate to either.
Traceback (most recent call last):
  File "/var/lib/juju/agents/unit-gateway-api-integrator-0/charm/src/state/validation.py", line 69, in wrapper
    return method(instance, *args)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/var/lib/juju/agents/unit-gateway-api-integrator-0/charm/src/charm.py", line 199, in _on_certificate_available
    self._reconcile()
  File "/var/lib/juju/agents/unit-gateway-api-integrator-0/charm/src/charm.py", line 258, in _reconcile
    self._define_ingress_resources_and_publish_url(
  File "/var/lib/juju/agents/unit-gateway-api-integrator-0/charm/src/charm.py", line 390, in _define_ingress_resources_and_publish_url
    http_route_resource_information = HTTPRouteResourceInformation.from_charm(
                                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/var/lib/juju/agents/unit-gateway-api-integrator-0/charm/src/state/http_route.py", line 80, in from_charm
    raise IngressIntegrationMissingError(
state.http_route.IngressIntegrationMissingError: Ingress and Gateway Route integration not ready. You must relate to either.

[32mINFO    [0m pytest_operator.plugin:plugin.py:1039 Forgetting model main...