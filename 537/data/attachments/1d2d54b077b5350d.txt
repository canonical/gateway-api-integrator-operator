[32mINFO    [0m pytest_operator.plugin:plugin.py:806 Connecting to existing model github-pr-2d32d-k8s:testing on unspecified cloud
[32mINFO    [0m juju.model:model.py:2098 Deploying local:gateway-api-integrator-0
[32mINFO    [0m juju.model:model.py:2972 Waiting for model:
  gateway-api-integrator/0 [allocating] waiting: installing agent
[32mINFO    [0m juju.model:model.py:2972 Waiting for model:
  gateway-api-integrator/0 [idle] blocked: Gateway class must be one of: [cilium,ck-gateway]
[32mINFO    [0m juju.model:model.py:2098 Deploying ch:amd64/jammy/self-signed-certificates-388
[32mINFO    [0m juju.model:model.py:2972 Waiting for model:
  self-signed-certificates/0 [allocating] waiting: installing agent
[32mINFO    [0m juju.model:model.py:2972 Waiting for model:
  self-signed-certificates/0 [idle] active: 
[33mWARNING [0m juju.model:model.py:1564 relate is deprecated and will be removed. Use integrate instead.
[32mINFO    [0m juju.model:model.py:2972 Waiting for model:
  self-signed-certificates/0 [idle] active: 
[32mINFO    [0m juju.model:model.py:2972 Waiting for model:
  self-signed-certificates/0 [idle] active: 
[32mINFO    [0m juju.model:model.py:2972 Waiting for model:
  gateway-api-integrator/0 [idle] blocked: Ingress integration not ready.
[32mINFO    [0m pytest_operator.plugin:plugin.py:951 Model status:

Model    Controller           Cloud/Region  Version  SLA          Timestamp
testing  github-pr-2d32d-k8s  k8s           3.5.7    unsupported  13:58:29Z

App                       Version  Status   Scale  Charm                     Channel      Rev  Address         Exposed  Message
gateway-api-integrator             blocked      1  gateway-api-integrator                   0  10.152.183.215  no       Ingress integration not ready.
self-signed-certificates           active       1  self-signed-certificates  latest/edge  388  10.152.183.135  no       

Unit                         Workload  Agent  Address    Ports  Message
gateway-api-integrator/0*    blocked   idle   10.1.0.26         Ingress integration not ready.
self-signed-certificates/0*  active    idle   10.1.0.80         

[32mINFO    [0m pytest_operator.plugin:plugin.py:957 Juju error logs:

unit-gateway-api-integrator-0: 13:56:22 ERROR unit.gateway-api-integrator/0.juju-log Configured gateway class  not present on the cluster.Available ones are: 'cilium,ck-gateway'
unit-gateway-api-integrator-0: 13:56:22 ERROR unit.gateway-api-integrator/0.juju-log Error setting up charm state component: Gateway class must be one of: [cilium,ck-gateway]
Traceback (most recent call last):
  File "/var/lib/juju/agents/unit-gateway-api-integrator-0/charm/src/state/validation.py", line 67, in wrapper
    return method(instance, *args)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/var/lib/juju/agents/unit-gateway-api-integrator-0/charm/./src/charm.py", line 128, in _on_config_changed
    config = CharmConfig.from_charm(self, client)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/var/lib/juju/agents/unit-gateway-api-integrator-0/charm/src/resource_manager/permission.py", line 47, in wrapper
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/var/lib/juju/agents/unit-gateway-api-integrator-0/charm/src/state/config.py", line 89, in from_charm
    raise InvalidCharmConfigError(
state.config.InvalidCharmConfigError: Gateway class must be one of: [cilium,ck-gateway]
unit-gateway-api-integrator-0: 13:56:23 ERROR unit.gateway-api-integrator/0.juju-log Configured gateway class  not present on the cluster.Available ones are: 'cilium,ck-gateway'
unit-gateway-api-integrator-0: 13:56:23 ERROR unit.gateway-api-integrator/0.juju-log Error setting up charm state component: Gateway class must be one of: [cilium,ck-gateway]
Traceback (most recent call last):
  File "/var/lib/juju/agents/unit-gateway-api-integrator-0/charm/src/state/validation.py", line 67, in wrapper
    return method(instance, *args)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/var/lib/juju/agents/unit-gateway-api-integrator-0/charm/./src/charm.py", line 141, in _on_start
    self._reconcile()
  File "/var/lib/juju/agents/unit-gateway-api-integrator-0/charm/./src/charm.py", line 266, in _reconcile
    config = CharmConfig.from_charm(self, client)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/var/lib/juju/agents/unit-gateway-api-integrator-0/charm/src/resource_manager/permission.py", line 47, in wrapper
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/var/lib/juju/agents/unit-gateway-api-integrator-0/charm/src/state/config.py", line 89, in from_charm
    raise InvalidCharmConfigError(
state.config.InvalidCharmConfigError: Gateway class must be one of: [cilium,ck-gateway]
unit-gateway-api-integrator-0: 13:57:24 ERROR unit.gateway-api-integrator/0.juju-log Error setting up charm state component: Certificates integration not ready.
Traceback (most recent call last):
  File "/var/lib/juju/agents/unit-gateway-api-integrator-0/charm/src/state/validation.py", line 67, in wrapper
    return method(instance, *args)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/var/lib/juju/agents/unit-gateway-api-integrator-0/charm/./src/charm.py", line 136, in _on_config_changed
    self._reconcile()
  File "/var/lib/juju/agents/unit-gateway-api-integrator-0/charm/./src/charm.py", line 268, in _reconcile
    tls_information = TLSInformation.from_charm(self, self.certificates)
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/var/lib/juju/agents/unit-gateway-api-integrator-0/charm/src/state/tls.py", line 49, in from_charm
    cls.validate(charm)
  File "/var/lib/juju/agents/unit-gateway-api-integrator-0/charm/src/state/tls.py", line 85, in validate
    raise TlsIntegrationMissingError("Certificates integration not ready.")
state.tls.TlsIntegrationMissingError: Certificates integration not ready.
unit-gateway-api-integrator-0: 13:57:28 ERROR unit.gateway-api-integrator/0.juju-log certificates:0: Error setting up charm state component: Ingress integration not ready.
Traceback (most recent call last):
  File "/var/lib/juju/agents/unit-gateway-api-integrator-0/charm/src/state/validation.py", line 67, in wrapper
    return method(instance, *args)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/var/lib/juju/agents/unit-gateway-api-integrator-0/charm/./src/charm.py", line 191, in _on_certificate_available
    self._reconcile()
  File "/var/lib/juju/agents/unit-gateway-api-integrator-0/charm/./src/charm.py", line 278, in _reconcile
    self._define_ingress_resources_and_publish_url(
  File "/var/lib/juju/agents/unit-gateway-api-integrator-0/charm/./src/charm.py", line 388, in _define_ingress_resources_and_publish_url
    http_route_resource_information = HTTPRouteResourceInformation.from_charm(
                                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/var/lib/juju/agents/unit-gateway-api-integrator-0/charm/src/state/http_route.py", line 64, in from_charm
    raise IngressIntegrationMissingError("Ingress integration not ready.")
state.http_route.IngressIntegrationMissingError: Ingress integration not ready.

[32mINFO    [0m pytest_operator.plugin:plugin.py:1039 Forgetting model main...